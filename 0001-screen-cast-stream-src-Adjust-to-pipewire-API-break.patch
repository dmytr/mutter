From f0c6c4eb1fa2b21e3806a31bbae0f210b029907e Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Florian=20M=C3=BCllner?= <fmuellner@gnome.org>
Date: Wed, 20 Sep 2017 19:54:45 +0200
Subject: [PATCH] screen-cast-stream-src: Adjust to pipewire API break

https://bugzilla.gnome.org/show_bug.cgi?id=787953
---
 src/backends/meta-screen-cast-stream-src.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/src/backends/meta-screen-cast-stream-src.c b/src/backends/meta-screen-cast-stream-src.c
index 7f8217712..e6d99d592 100644
--- a/src/backends/meta-screen-cast-stream-src.c
+++ b/src/backends/meta-screen-cast-stream-src.c
@@ -535,7 +535,13 @@ meta_screen_cast_stream_src_initable_init (GInitable     *initable,
       return FALSE;
     }
 
+#if PIPEWIRE_VERSION_MICRO  == 4
   priv->pipewire_remote = pw_remote_new (priv->pipewire_core, NULL);
+#elif PIPEWIRE_VERSION_MICRO  >= 5
+  priv->pipewire_remote = pw_remote_new (priv->pipewire_core, NULL, 0);
+#else
+  priv->pipewire_remote = NULL;
+#endif
   if (!priv->pipewire_remote)
     {
       g_set_error (error, G_IO_ERROR, G_IO_ERROR_FAILED,
-- 
2.13.5

